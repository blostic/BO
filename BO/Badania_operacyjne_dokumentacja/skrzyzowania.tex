\documentclass{article}
\usepackage{graphicx}
\usepackage{cgw06}
\usepackage{epsf}
\usepackage{polski}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage[all]{hypcap}
\usepackage{color}
\usepackage{mdframed}
\usepackage{titletoc}
\usepackage{listings}
\usepackage{mathtools}

\definecolor{dark-red}{rgb}{0.5,0,0}
\definecolor{dark-green}{rgb}{0,0.5,0}
\definecolor{dark-blue}{rgb}{0,0,0.5}
\hypersetup{
    colorlinks,
    linkcolor={dark-blue},
    urlcolor={dark-blue},
    citecolor={dark-green}
}

\lstdefinestyle{customc}{
  belowcaptionskip=1\baselineskip,
  breaklines=true,
  frame=L,
  xleftmargin=\parindent,
  language=Pascal,
  showstringspaces=false,
  basicstyle=\footnotesize\ttfamily,
  keywordstyle=\bfseries\color{green!40!black},
  commentstyle=\itshape\color{purple!40!black},
  identifierstyle=\color{blue},
  stringstyle=\color{orange},
}

\lstset{escapechar=@,style=customc}
\title {Skrzyżowania ++}
    
\author{Piotr Skibiak, Tomasz Kwiecień, Marcin Nowak, Ksawery Głaz, Paweł Łabno}
\institute{AGH, Wydział IEiT, Informatyka}

\begin{document}
\maketitle

\begin{abstract}
Projekt ma na celu skrócenie oczekiwania samochodów na skrzyżowaniach, poprzez zastosowanie optymalnego ustawienia czasu świateł. Optymalne (albo prawie optymalne) ustawienie świateł wyznaczane jest poprzez użycie jednego z algorytmów stadnych - algorytmu kukułki.   
\end{abstract}

\newpage
\renewcommand*\contentsname{Spis Treści}
\tableofcontents
\setcounter{tocdepth}{3}

\newpage

\section{Przedstawienie problemu}
    W miastach (zwłaszcza tych wielkich) często spotyka się zjawisko jakim są zakorkowane ulice pełne samochodów. Jednak każda ulica ma inne natężenie ilości samochodów w różnych porach dnia, a światła na skrzyżowaniach mają stałe czasy świecenia. W czasie tak zwanych godzin szczytu przez jedne ulice przejeżdża więcej samochodów niż przez inne, co powoduje korki na drogach. Można by jednak upłynnić ten ruch poprzez wydłużenie czasu świecenia świateł zielonych dla bardziej uczęszczanych ulic, a skrócenie go dla tych mniej uczęszczanych. I właśnie tym zajmuje się nasz program. Czyli badaniem w danych godzinach natężenia ruchu na danych ulicach i optymalizowanie czasów świecenia świateł tak aby ten ruch był płynniejszy dla całego wybranego (narysowanego) obszaru. W tym celu korzystamy z algorytmu kukułki, który nam optymailizuje czasy świecenia świateł dla poszczególnych skrzyżowań.


\section{Cele projektu}
    Projekt ma na celu umożliwienie użytkownikowi znalezienie optymalnego ustawienia czasów świecenia świateł (światła zielonego i czerwonego) w sieci skrzyżowań ustalonych przez użytkownika. Aplikacja powinna dać użytkownikowi możliwość ręcznego wprowadzenia sieci skrzyżowań, zapisu konfiguracji do pliku, lub wczytania wcześniej zapisanej. 

\section{Wstępne założenia}
\subsection{Środowisko Implementacji}
    Aby pogodzić potrzebę szybkiego wykonywania symulacji, oraz zdążyć wykonać projekt w przeznaczonym do tego czasie, językiem wybranym do implementacji jest Java. Ustaliliśmy, że aby zmniejszyć prawdopodobieństwo wystąpienia niespójności związanej z wykorzystywaniem różnych narzędzi, aplikacja będzie pisana przy pomocy Eclipse IDE. 

\subsection{Praca w zespole}
    Praca grupowa była wspomagana poprzez wykorzystanie sytemu kontroli wersji GIT, oraz poprzez utorzenie Google Doc'a projektu. W trakcie realizacji przeprowadziliśmy również kilka spotkań mających na celu, kontrolę przebiegu prac, wyjaśnienie watpliwości / niejasności wykrytych w trakcie iteracji, a także przydział kolejnych zadań.

\subsection{Ogólne założenia}
    W naszym projekcie musieliśmy podjąć pewne złożenia (uproszczenia) gdyż nie jest możliwe aby zrobić program dla tego problemu (w tak krótkim czasie jaki mieliśmy) rozpatrując wszystkie najdrobniejsze szczegóły. Pomineliśmy przedewszystkim czas świecenia żółtego światła przy zmianie z czerwonego na zielone oraz odwrotnie. Nie są rozpatrywane przypadki gdy samochód na skrzyżowaniu zawraca lub drogi jedno kierunkowe czy tak zwane ślepe uliczki. Pomineliśmy także dość ważny przypadek jakim są przejścia dla pieszych z światłami, które są prawie przy każdym skrzyżowaniu. Wiele osób za pewne znalazłoby jeszcze więcej szczegółów, które można by rozpatrzyć, ale aby to uwzględnić to przy naszym programie trzeba by pewnie spędzić jeszcze kilka miesięcy albo i dłużej. Kolejnym uproszczeniem jest fakt, że program działa tylko dla skrzyżowań, z których wychodzą jedynie cztery drogi. Można stworzyć sytuację dla mniejszej ilości dróg wychodzących ze skrzyżowania jeśli narysujemy drogę połączoną z generatorem, dla której jako parametry podamy 0 - maksymalna ilość samochodów oraz 0 - intensywność.

\section{Opis logiki}
    Nasza logika składa się z kilku klas, za pomocą których możemy tworzyć potrzebne w naszym projekcie obiekty: Generatory, Skrzyżowania, Drogi i Samochody. Obiekty te tworzone są przez GUI, a następnie server wykonuje symulacje za ich pomocą.

\subsection{Klasa Generator}
    Obiekt, który jest instancją tej klasy jest zakończeniem dróg, których jeden z końców nie jest podłączony do żadnego ze skrzyżowań. Zadaniem tego obiektu jest tworzenie nowych samochodów pojawiających się na mapie oraz usówanie tych wyjeżdżających z mapy. Klasa posiada metodę moveVehicles odpowiedzialną właśnie za pojawianie się i znikanie samochodów na mapie. Posiada także funkcję, która za pomocą losowości decyduje czy obiekt Generator powinien w danym momencie stworzyć obiekt samochód.

\subsection{Klasa Junction}
    Jest to klasa abstrakcyjna, po której dziedziczy klasa Junction, której instancją jest obiekt Skrzyżowanie. Poza konstruktorem posiada ona głównie gettery, które ułatwiąją dostęp do dróg wejściowych oraz wyjściowych, a także współrzędnych danego skrzyżowania. Posiada także metodę, która dodaje na każdą ulicę wychodzącą z tego skrzyżowania jakąś stałą liczbę samochodów, która jest zależna od ustalonego wcześniej natężenia ruchu na danej drodze.

\subsection{Klasa Intersection}
    Klasa ta dziedziczy po abstrakcyjnej klasie Junction. Instancja te klasy odpowiada za obsługę świecenia świateł oraz za decyzję, w którą drogę dany samochód, który wjeżdża na to skrzyżowanie ma skręcić. 

\subsection{Klasa Road}
    Instancje tej klasy przechowują samochody, które znajdują się na danej drodze. Posiada ograniczenia w postaci maksymalnej liczby samochodów, które mogą się znajdować na tej drodze oraz natęzenie ruchu, które określa ile samochodów wjeżdża na daną drogę w ciągu godziny. Każda droga ma współrzędne początkowe i końcowe. Pojedyńczy obiekt "Droga" odpowiada za drogę jednokierunkową, dlatego gdy rysujemy drogę łaczącą dwa skrzyżowania lub skrzyżowanie i generator to tworzą się dwa obiekty typu "Road" (jeden w jedną stronę i drugi w drugą). Klasa ta posiada metodę getFirstVechicle, która umożliwia przekazanie najbliższego do skrzyżowania / generatora samochodu.

\subsection{Klasa Simulator}
    W obiekcie typu "Simulator" przechowywane są obiekty, które reprezentują cały model sieci ulic. Zapewnia także wykorzystanie algorytmu kukułki, do której przekazujemy parametry - długość świecenia świateł, dzięki czemu mamy zapewnioną symulację.

\subsection{Klasa Vehicle}
    Posiada metody i pola, które są ułatwiają ruch samochodów czyli gettery i settery dla współrzędnych danego samochodu, oraz czas oczekiwania, bądź informacja o danym samochodzie czy jest w konkretnym momencie w ruchu lub czeka przed skrzyżowaniem.

\section{Algorytm kukułki}

\section{Obsługa aplikacji}
    Uruchamiając nasz program wyświetla się okno, które jest podzielone na 2 seskcje obszar, w którym możemy rysowawać skrzyżowania i drogi oraz przedstawiona tam jest wizualnie symulacja. W drugim obszarze po prawej stronie znajdują się wszystkie przyciski do obsługi programu.

\subsection{Dodaj Generator}
    Gdy przycisk ten zostanie naciśnięty możemy za pomocą kliknięcia lewym przyciskiem myszy na obszarze do rysowania stworzyć generator. Zostanie on narysowany w kliknętym miejscu jako czerwone kółko poprzez pobranie współrzednych kursora, a także zostanie stworzony obiekt Generator, który zostanie dodany do listy generatorów.

\subsection{Dodaj Skrzyżowanie}
    Analogicznie jak w przypadku Generatora zostanie stworzony obiekt Skrzyżowanie oraz w klikniętym miejscu pojawi się czarne kółko.

\subsection{Dodaj Drogę}
    Po naciśnięciu przycisku "Dodaj Drogę" użytkownik może poprzez kliknięcie na dwóch skrzyżowaniach lub generatorze i skrzyrzowaniu (najpierw jednym, a następnie na drugim), które zostało wcześniej narysowane, stworzyć nowy obiekt Droga. Gdy zostaną kliknięte dwa (wcześniej narysowane) obiekty typu Generator lub skrzyżowanie, pojawi się okno z zapytaniem o to ile samochodów może pomieścić droga, a następnie ile (w ciągu godziny) samochodów może przejechać przez tą drogę czyli intensywaność zatłoczenia. Jeżeli jeden z zapytanych przez program parametrów nie zostanie podany lub będzie podany, ale w złym formacie np. użytkownik wpisze jakąś literę zamiast cyfry to obiekt nie zostanie stworzony. Po poprawnym podaniu wszystkich parametrów zostanie stworzony i narysowany obiekt typu droga. Narysowany jest podwójnie by było lepiej widać poruszające się samochody w obie strony. Jedna linia oznacza drogę w jedną stronę, a druga w drugą.

\subsection{Zacznij od nowa}
    Czyści całą narysowaną bądź wczytaną mapę.

\subsection{Zapisz}
    Zapisuje w wybranym przez użytkownika miaejscu na dysku narysowaną wcześniej mapę w postaci rysunku i list stworzonych obiektów.

\subsection{Wczytaj}
    Wczytuje z dysku wcześniej zapisaną mapę.

\subsection{Wyślij do serwera}
    Gdy narysujemy już bądź wczytamy mapę, musimy ją wysłać do włączonego wcześniej serwera żądanie, podając IP hosta, na którego komputerze jest włączony serwer, lub wpisując localhost jeśli mamy postawiony serwer lokalnie u siebie. Serwer zwraca nam ID jakie nadał temu żądaniu.

\subsection{Sprawdź rozwiązanie}
    Klikając ten przycisk, a następnie podając ID żądania, pytamy serwer czy dla danego żądania zostało wyliczone optymalne rozwiązanie. Serwer zwraca nam odpowiednią informację, która zostaje wyświetlna w okienku.

\subsection{Rozpocznij Symulację}
    Rozpoczęta zostanie symulacja poruszających się samochodów przedstawionych w postaci zielonych kółek. Symulacja jest przedstawiona wizualnie na narysowanej mapie. Współrzędne samochodów są pobierane co jakiś (bardzo króŧki) czas przez co mamy wrażenie, że samochody poruszają się płynnie.

\subsection{Zatrzymaj Symulacje}
    Wstrzymuje wcześniej uruchomioną symulację. Wstrzymaną symulację możemy kontynuoawać po przez ponowne wciśnięcie przycisku "Rozpocznij Symulacje".

\subsection{Wyjdź}
    Przyciśnięcie tego przycisku powoduje całokowite wyjście z programu.

\subsection{Szybkość Symulacji}
    Jest to suwak umożliwiający nam wybór, jak szybko nasza symulacja ma się wykonywać. Dzięki temu możemy ją zwolnić aby lepiej zobaczyć rezultaty.

\section{Rezultaty}


\begin{itemize}

\end{document} 